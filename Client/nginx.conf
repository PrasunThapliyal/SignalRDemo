
events {
	worker_connections 768;
	# multi_accept on;
}

http {
	include mime.types;
	  server {
		# listen 80;
		
		listen 443 ssl;
		ssl_certificate /GIT/MyPersonal/SignalRDemo/Client/localhost.crt;
		ssl_certificate_key /GIT/MyPersonal/SignalRDemo/Client/localhost.key;
		
		server_name localhost;
		charset utf-8;

		location / {
			root "/GIT/MyPersonal/SignalRDemo/Client";
		}
		
		location /weatherforecast {
			proxy_pass https://localhost:2613/weatherforecast;
		}
		
		location /WebSocketsService {
			proxy_pass https://cicd.apps.ciena.com/WebSocketsService;
			proxy_http_version 1.1;
			proxy_set_header Upgrade $http_upgrade;
			proxy_set_header Connection "upgrade";
			# proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
            # proxy_set_header   X-Forwarded-Host $server_name;
		}
		
		location ~ /.css {
			add_header  Content-Type    text/css;
		}
		
		location ~ /.js {
			add_header  Content-Type    application/x-javascript;
		}
		location /login/ {
            proxy_pass https://cicd.apps.ciena.com/login/;
        }
        # ====================================================================
        # APIs that our UI apps need to function properly
        # ====================================================================
        location /tron/ {
            proxy_pass https://cicd.apps.ciena.com/tron/;
        }
	}
	
}
